<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>빅데이터 아카데미 16기 - 1조</title>

    <!-- Bootstrap Core CSS -->
    <link href="/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- MetisMenu CSS -->
    <link href="/vendor/metisMenu/metisMenu.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="/dist/css/sb-admin-2.css" rel="stylesheet">

    <!-- Morris Charts CSS -->
    <link href="/vendor/morrisjs/morris.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="/vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

<style>
		.axis path,
.axis line {
	fill: none;
	stroke: black;
	shape-rendering: crispEdges;
}

.axis text {
	font-family: sans-serif;
	font-size: 11px;
}

.dot {
  stroke: #000;
}


.legend {
	            padding: 5px;
	            font: 10px sans-serif;
	            background: yellow;
	            box-shadow: 2px 2px 1px #888;
            }
		</style>

</head>

<body>

    <div id="wrapper">

        <!-- Navigation -->
        <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html">빅데이터 아카데미 16기 - 1조</a>
            </div>
            <!-- /.navbar-header -->

            

            <div class="navbar-default sidebar" role="navigation">
                <div class="sidebar-nav navbar-collapse">
                    <ul class="nav" id="side-menu">
                        
                        <li>
                            <a href="/"><i class="fa fa-bar-chart-o fa-fw"></i> 데이터 1</a>
                        </li>

                        <li>
                            <a href="/data_2"><i class="fa fa-bar-chart-o fa-fw"></i> 데이터 2</a>
                        </li>

                        <li>
                            <a href="/data_3"><i class="fa fa-bar-chart-o fa-fw"></i> 데이터 3</a>
                        </li>

                        <li>
                            <a href="/data_4"><i class="fa fa-bar-chart-o fa-fw"></i> 데이터 4</a>
                        </li>

                        <li>
                            <a href="/data_5"><i class="fa fa-bar-chart-o fa-fw"></i> 데이터 5</a>
                        </li>
                        
                    </ul>
                </div>
                <!-- /.sidebar-collapse -->
            </div>
            <!-- /.navbar-static-side -->
        </nav>

        <div id="page-wrapper">
            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header">데이터 1</h1>
                </div>
                <!-- /.col-lg-12 -->
            </div>
           
            <div class="row">

                <div class="col-lg-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <i class="fa fa-map-o fa-fw"></i> 세종특별자치시 지도
                        </div>
                        <div class="panel-body">
                            <div id="map" style="width:100%;height:500px;"></div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <i class="fa fa-map-o fa-fw"></i> 차트
                        </div>
                        <div class="panel-body">
                            <div>
                                    <div class="btn-group pull-right">
                                            <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                                                             Messages per hour <span class="caret"></span>
                                            </button>
                                            <ul class="dropdown-menu" role="menu">
                                                    <li><a class="m" value="2014-02-19" href="#">2014-02-19</a></li>
                                            <li><a class="m" value="2014-02-20" href="#">2014-02-20</a></li>
                                            <li><a class="m" value="2014-02-21" href="#">2014-02-21</a></li>
                                            <li><a class="m" value="2014-02-22" href="#">2014-02-22</a></li>
                                            <li><a class="m" value="2014-02-23" href="#">2014-02-23</a></li>
                                            </ul>
                                    </div>

                            <div id="mbars">
                            </div>
                        </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-8">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <i class="fa fa-bar-chart-o fa-fw"></i> Area Chart Example
                            <div class="pull-right">
                                <div class="btn-group">
                                    <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
                                        Actions
                                        <span class="caret"></span>
                                    </button>
                                    <ul class="dropdown-menu pull-right" role="menu">
                                        <li><a href="#">Action</a>
                                        </li>
                                        <li><a href="#">Another action</a>
                                        </li>
                                        <li><a href="#">Something else here</a>
                                        </li>
                                        <li class="divider"></li>
                                        <li><a href="#">Separated link</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!-- /.panel-heading -->
                        <div class="panel-body">
                            <div id="morris-area-chart"></div>
                        </div>
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <i class="fa fa-bar-chart-o fa-fw"></i> Bar Chart Example
                            <div class="pull-right">
                                <div class="btn-group">
                                    <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
                                        Actions
                                        <span class="caret"></span>
                                    </button>
                                    <ul class="dropdown-menu pull-right" role="menu">
                                        <li><a href="#">Action</a>
                                        </li>
                                        <li><a href="#">Another action</a>
                                        </li>
                                        <li><a href="#">Something else here</a>
                                        </li>
                                        <li class="divider"></li>
                                        <li><a href="#">Separated link</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!-- /.panel-heading -->
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-lg-4">
                                    <div class="table-responsive">
                                        <table class="table table-bordered table-hover table-striped">
                                            <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th>Date</th>
                                                    <th>Time</th>
                                                    <th>Amount</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>3326</td>
                                                    <td>10/21/2013</td>
                                                    <td>3:29 PM</td>
                                                    <td>$321.33</td>
                                                </tr>
                                                <tr>
                                                    <td>3325</td>
                                                    <td>10/21/2013</td>
                                                    <td>3:20 PM</td>
                                                    <td>$234.34</td>
                                                </tr>
                                                <tr>
                                                    <td>3324</td>
                                                    <td>10/21/2013</td>
                                                    <td>3:03 PM</td>
                                                    <td>$724.17</td>
                                                </tr>
                                                <tr>
                                                    <td>3323</td>
                                                    <td>10/21/2013</td>
                                                    <td>3:00 PM</td>
                                                    <td>$23.71</td>
                                                </tr>
                                                <tr>
                                                    <td>3322</td>
                                                    <td>10/21/2013</td>
                                                    <td>2:49 PM</td>
                                                    <td>$8345.23</td>
                                                </tr>
                                                <tr>
                                                    <td>3321</td>
                                                    <td>10/21/2013</td>
                                                    <td>2:23 PM</td>
                                                    <td>$245.12</td>
                                                </tr>
                                                <tr>
                                                    <td>3320</td>
                                                    <td>10/21/2013</td>
                                                    <td>2:15 PM</td>
                                                    <td>$5663.54</td>
                                                </tr>
                                                <tr>
                                                    <td>3319</td>
                                                    <td>10/21/2013</td>
                                                    <td>2:13 PM</td>
                                                    <td>$943.45</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <!-- /.table-responsive -->
                                </div>
                                <!-- /.col-lg-4 (nested) -->
                                <div class="col-lg-8">
                                    <div id="morris-bar-chart"></div>
                                </div>
                                <!-- /.col-lg-8 (nested) -->
                            </div>
                            <!-- /.row -->
                        </div>
                        <!-- /.panel-body -->
                    </div>
                    

<!-- /.panel -->
                    
                </div>
                
                <!-- /.col-lg-8 -->
                <div class="col-lg-4">
                    
                    <!-- /.panel -->
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <i class="fa fa-bar-chart-o fa-fw"></i> Donut Chart Example
                        </div>
                        <div class="panel-body">
                            <div id="morris-donut-chart"></div>
                            <a href="#" class="btn btn-default btn-block">View Details</a>
                        </div>
                        <!-- /.panel-body -->
                    </div>
                    
                </div>
                <!-- /.col-lg-4 -->
            </div>
            <!-- /.row -->
        </div>
        <!-- /#page-wrapper -->

    </div>
    <!-- /#wrapper -->

    <!-- jQuery -->
    <script src="/vendor/jquery/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="/vendor/bootstrap/js/bootstrap.min.js"></script>

    <!-- Metis Menu Plugin JavaScript -->
    <script src="/vendor/metisMenu/metisMenu.min.js"></script>

    <!-- Morris Charts JavaScript -->
    <script src="/vendor/raphael/raphael.min.js"></script>
    <script src="/vendor/morrisjs/morris.min.js"></script>
    <script src="/data/morris-data.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="/dist/js/sb-admin-2.js"></script>

    <script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script>

    <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?clientId=qC847ahWQdnzdzzY0Avh&submodules=geocoder"></script>

    <script>
      

var HOME_PATH = window.HOME_PATH || '.';

var map = new naver.maps.Map(document.getElementById('map'), {
    zoom: 11,
    center: new naver.maps.LatLng(37.3614483, 129.1114883)
});

var latlngs = [
    new naver.maps.LatLng(
127.254419,
36.544656
),
new naver.maps.LatLng(
127.254419,
36.544656
),
new naver.maps.LatLng(
127.168869,
36.7329357
),
new naver.maps.LatLng(
127.168869,
36.7329357
),
new naver.maps.LatLng(
127.168869,
36.7329357
),
new naver.maps.LatLng(
127.168869,
36.7329357
),
new naver.maps.LatLng(
127.2104243,
36.4949698
),
new naver.maps.LatLng(
127.2104243,
36.4949698
),
new naver.maps.LatLng(
127.205197,
36.689997
),
new naver.maps.LatLng(
127.205197,
36.689997
),
new naver.maps.LatLng(
127.29797,
36.421092
),
new naver.maps.LatLng(
127.29797,
36.421092
),
new naver.maps.LatLng(
127.29797,
36.421092
),
new naver.maps.LatLng(
127.29797,
36.421092
),
new naver.maps.LatLng(
127.3329252,
36.5349721
),
new naver.maps.LatLng(
127.3329252,
36.5349721
),
new naver.maps.LatLng(
127.3329252,
36.5349721
),
new naver.maps.LatLng(
127.2782615,
36.4191233
),
new naver.maps.LatLng(
127.2782615,
36.4191233
),
new naver.maps.LatLng(
127.2761834,
36.4515734
),
new naver.maps.LatLng(
127.2761834,
36.4515734
),
new naver.maps.LatLng(
127.2761834,
36.4515734
),
new naver.maps.LatLng(
127.2761834,
36.4515734
),
new naver.maps.LatLng(
127.2761834,
36.4515734
),
new naver.maps.LatLng(
127.2761834,
36.4515734
),
new naver.maps.LatLng(
127.2761834,
36.4515734
),
new naver.maps.LatLng(
127.2761834,
36.4515734
),
new naver.maps.LatLng(
127.3553564,
36.5335834
),
new naver.maps.LatLng(
127.2651661,
36.6832445
),
new naver.maps.LatLng(
127.2651661,
36.6832445
),
new naver.maps.LatLng(
127.3736315,
36.5273457
),
new naver.maps.LatLng(
127.3736315,
36.5273457
),
new naver.maps.LatLng(
127.3022245,
36.6737314
),
new naver.maps.LatLng(
127.3022245,
36.6737314
),
new naver.maps.LatLng(
127.1875001,
36.6551672
),
new naver.maps.LatLng(
127.1875001,
36.6551672
),
new naver.maps.LatLng(
127.2210287,
36.5549792
),
new naver.maps.LatLng(
127.2210287,
36.5549792
),
new naver.maps.LatLng(
127.2923329,
36.577293
),
new naver.maps.LatLng(
127.2923329,
36.577293
),
new naver.maps.LatLng(
127.2923329,
36.577293
),
new naver.maps.LatLng(
127.2923329,
36.577293
),
new naver.maps.LatLng(
127.339132,
36.5396956
),
new naver.maps.LatLng(
127.339132,
36.5396956
),
new naver.maps.LatLng(
127.313469,
36.478379
),
new naver.maps.LatLng(
127.313469,
36.478379
),
new naver.maps.LatLng(
127.313469,
36.478379
),
new naver.maps.LatLng(
127.313469,
36.478379
),
new naver.maps.LatLng(
127.313469,
36.478379
),
new naver.maps.LatLng(
127.313469,
36.478379
),
new naver.maps.LatLng(
127.2458989,
36.6656413
),
new naver.maps.LatLng(
127.2458989,
36.6656413
),
new naver.maps.LatLng(
127.3516421,
36.5292662
),
new naver.maps.LatLng(
127.3516421,
36.5292662
),
new naver.maps.LatLng(
127.2899782,
36.6253991
),
new naver.maps.LatLng(
127.2899782,
36.6253991
),
new naver.maps.LatLng(
127.2899782,
36.6253991
),
new naver.maps.LatLng(
127.2899782,
36.6253991
),
new naver.maps.LatLng(
127.329707,
36.4801148
),
new naver.maps.LatLng(
127.329707,
36.4801148
),

];

var markerList = [];

for (var i=0, ii=latlngs.length; i<ii; i++) {
    var icon = {
            url: HOME_PATH +'/img/sp_pins_spot_v3.png',
            size: new naver.maps.Size(24, 37),
            anchor: new naver.maps.Point(12, 37),
            origin: new naver.maps.Point(i * 29, 0)
        },
        marker = new naver.maps.Marker({
            position: latlngs[i],
            map: map,
            icon: icon
        });

    marker.set('seq', i);

    markerList.push(marker);

    marker.addListener('mouseover', onMouseOver);
    marker.addListener('mouseout', onMouseOut);

    icon = null;
    marker = null;
}

function onMouseOver(e) {
    var marker = e.overlay,
        seq = marker.get('seq');

    marker.setIcon({
        url: HOME_PATH +'/img/sp_pins_spot_v3_over.png',
        size: new naver.maps.Size(24, 37),
        anchor: new naver.maps.Point(12, 37),
        origin: new naver.maps.Point(seq * 29, 50)
    });
}

function onMouseOut(e) {
    var marker = e.overlay,
        seq = marker.get('seq');

    marker.setIcon({
        url: HOME_PATH +'/img/sp_pins_spot_v3.png',
        size: new naver.maps.Size(24, 37),
        anchor: new naver.maps.Point(12, 37),
        origin: new naver.maps.Point(seq * 29, 0)
    });
}

      </script>

    <script type="text/javascript">
                    var w = 600;                        //width
                    var h = 500;                        //height
                    var padding = {top: 40, right: 40, bottom: 40, left:40};
                    var dataset;
                    //Set up stack method
                    var stack = d3.layout.stack();

                    d3.json("/source/mperday.json",function(json){
                            dataset = json;

                            //Data, stacked
                            stack(dataset);

                            var color_hash = {
                                        0 : ["Invite","#1f77b4"],
                                            1 : ["Accept","#2ca02c"],
                                            2 : ["Decline","#ff7f0e"]

                            };


                            //Set up scales
                            var xScale = d3.time.scale()
                                    .domain([new Date(dataset[0][0].time),d3.time.day.offset(new Date(dataset[0][dataset[0].length-1].time),8)])
                                    .rangeRound([0, w-padding.left-padding.right]);

                            var yScale = d3.scale.linear()
                                    .domain([0,				
                                            d3.max(dataset, function(d) {
                                                    return d3.max(d, function(d) {
                                                            return d.y0 + d.y;
                                                    });
                                            })
                                    ])
                                    .range([h-padding.bottom-padding.top,0]);

                            var xAxis = d3.svg.axis()
                                                       .scale(xScale)
                                                       .orient("bottom")
                                                       .ticks(d3.time.days,1);

                            var yAxis = d3.svg.axis()
                                                       .scale(yScale)
                                                       .orient("left")
                                                       .ticks(10);



                            //Easy colors accessible via a 10-step ordinal scale
                            var colors = d3.scale.category10();

                            //Create SVG element
                            var svg = d3.select("#mbars")
                                                    .append("svg")
                                                    .attr("width", w)
                                                    .attr("height", h);

                            // Add a group for each row of data
                            var groups = svg.selectAll("g")
                                    .data(dataset)
                                    .enter()
                                    .append("g")
                                    .attr("class","rgroups")
                                    .attr("transform","translate("+ padding.left + "," + (h - padding.bottom) +")")
                                    .style("fill", function(d, i) {
                                            return color_hash[dataset.indexOf(d)][1];
                                    });

                            // Add a rect for each data value
                            var rects = groups.selectAll("rect")
                                    .data(function(d) { return d; })
                                    .enter()
                                    .append("rect")
                                    .attr("width", 2)
                                    .style("fill-opacity",1e-6);


                            rects.transition()
                                 .duration(function(d,i){
                                     return 500 * i;
                                 })
                                 .ease("linear")
                                .attr("x", function(d) {
                                            return xScale(new Date(d.time));
                                    })
                                    .attr("y", function(d) {
                                            return -(- yScale(d.y0) - yScale(d.y) + (h - padding.top - padding.bottom)*2);
                                    })
                                    .attr("height", function(d) {
                                            return -yScale(d.y) + (h - padding.top - padding.bottom);
                                    })
                                    .attr("width", 15)
                                    .style("fill-opacity",1);

                                    svg.append("g")
                                            .attr("class","x axis")
                                            .attr("transform","translate(40," + (h - padding.bottom) + ")")
                                            .call(xAxis);


                                    svg.append("g")
                                            .attr("class","y axis")
                                            .attr("transform","translate(" + padding.left + "," + padding.top + ")")
                                            .call(yAxis);

                                    // adding legend

                                    var legend = svg.append("g")
                                                                    .attr("class","legend")
                                                                    .attr("x", w - padding.right - 65)
                                                                    .attr("y", 25)
                                                                    .attr("height", 100)
                                                                    .attr("width",100);

                                    legend.selectAll("g").data(dataset)
                                              .enter()
                                              .append('g')
                                              .each(function(d,i){
                                                    var g = d3.select(this);
                                                    g.append("rect")
                                                            .attr("x", w - padding.right - 65)
                                                            .attr("y", i*25 + 10)
                                                            .attr("width", 10)
                                                            .attr("height",10)
                                                            .style("fill",color_hash[String(i)][1]);

                                                    g.append("text")
                                                     .attr("x", w - padding.right - 50)
                                                     .attr("y", i*25 + 20)
                                                     .attr("height",30)
                                                     .attr("width",100)
                                                     .style("fill",color_hash[String(i)][1])
                                                     .text(color_hash[String(i)][0]);
                                              });

                                    svg.append("text")
                                    .attr("transform","rotate(-90)")
                                    .attr("y", 0 - 5)
                                    .attr("x", 0-(h/2))
                                    .attr("dy","1em")
                                    .text("Number of Messages");

                            svg.append("text")
                               .attr("class","xtext")
                               .attr("x",w/2 - padding.left)
                               .attr("y",h - 5)
                               .attr("text-anchor","middle")
                               .text("Days");

                            svg.append("text")
                    .attr("class","title")
                    .attr("x", (w / 2))             
                    .attr("y", 20)
                    .attr("text-anchor", "middle")  
                    .style("font-size", "16px") 
                    .style("text-decoration", "underline")  
                    .text("Number of messages per day.");

                            //On click, update with new data			
                            d3.selectAll(".m")
                                    .on("click", function() {
                                            var date = this.getAttribute("value");

                                            var str;
                                            if(date == "2014-02-19"){
                                                    str = "/source/19.json";
                                            }else if(date == "2014-02-20"){
                                                    str = "/source/20.json";
                                            }else if(date == "2014-02-21"){
                                                    str = "/source/21.json";
                                            }else if(date == "2014-02-22"){
                                                    str = "/source/22.json";
                                            }else{
                                                    str = "/source/23.json";
                                            }

                                            d3.json(str,function(json){

                                                    dataset = json;
                                                    stack(dataset);

                                                    console.log(dataset);

                                                    xScale.domain([new Date(0, 0, 0,dataset[0][0].time,0, 0, 0),new Date(0, 0, 0,dataset[0][dataset[0].length-1].time,0, 0, 0)])
                                                    .rangeRound([0, w-padding.left-padding.right]);

                                                    yScale.domain([0,				
                                                                                    d3.max(dataset, function(d) {
                                                                                            return d3.max(d, function(d) {
                                                                                                    return d.y0 + d.y;
                                                                                            });
                                                                                    })
                                                                            ])
                                                                            .range([h-padding.bottom-padding.top,0]);

                                                    xAxis.scale(xScale)
                                                         .ticks(d3.time.hour,2)
                                                         .tickFormat(d3.time.format("%H"));

                                                    yAxis.scale(yScale)
                                                         .orient("left")
                                                         .ticks(10);

                                                     groups = svg.selectAll(".rgroups")
                                        .data(dataset);

                                        groups.enter().append("g")
                                        .attr("class","rgroups")
                                        .attr("transform","translate("+ padding.left + "," + (h - padding.bottom) +")")
                                        .style("fill",function(d,i){
                                            return color(i);
                                        });


                                        rect = groups.selectAll("rect")
                                        .data(function(d){return d;});

                                        rect.enter()
                                          .append("rect")
                                          .attr("x",w)
                                          .attr("width",1)
                                          .style("fill-opacity",1e-6);

                                    rect.transition()
                                        .duration(1000)
                                        .ease("linear")
                                        .attr("x",function(d){
                                            return xScale(new Date(0, 0, 0,d.time,0, 0, 0));
                                        })
                                        .attr("y",function(d){
                                            return -(- yScale(d.y0) - yScale(d.y) + (h - padding.top - padding.bottom)*2);
                                        })
                                        .attr("height",function(d){
                                            return -yScale(d.y) + (h - padding.top - padding.bottom);
                                        })
                                        .attr("width",15)
                                        .style("fill-opacity",1);

                                    rect.exit()
                                                   .transition()
                                                   .duration(1000)
                                                   .ease("circle")
                                                   .attr("x",w)
                                                   .remove();

                                    groups.exit()
                                                   .transition()
                                                   .duration(1000)
                                                   .ease("circle")
                                                   .attr("x",w)
                                                   .remove();


                                                    svg.select(".x.axis")
                                                       .transition()
                                                       .duration(1000)
                                                       .ease("circle")
                                                       .call(xAxis);

                                                    svg.select(".y.axis")
                                                       .transition()
                                                       .duration(1000)
                                                       .ease("circle")
                                                       .call(yAxis);

                                                    svg.select(".xtext")
                                                       .text("Hours");

                                                    svg.select(".title")
                                            .text("Number of messages per hour on " + date + ".");
                                            });			
                                    });


                    });

                    </script>

</body>

</html>
